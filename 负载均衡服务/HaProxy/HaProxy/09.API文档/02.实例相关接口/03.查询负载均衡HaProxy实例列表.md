---
title: 查询负载均衡HaProxy实例列表   
date: 2021-12-29 16:24:00
permalink: /pages/1233035/
article: true
---

## 1.接口描述

**Action**： DescribeLoadBalancers

**描述**： 获取HaProxy实例列表（支持常见字段过滤、instance_uuid/instance_name/ip）

**请求地址**： cdsapi.capitalonline.net/lb

**请求方法**： GET

## 2.请求参数

| 参数名       | 必选 | 类型   | 说明                                                        |
| :----------- | :--- | :----- | :---------------------------------------------------------- |
| IP           | 否   | string | 要过滤的服务IP                                              |
| InstanceUuid | 否   | string | 要过滤的实例编号                                            |
| InstanceName | 否   | string | 要过滤的实例名称                                            |
| StartTime    | 否   | string | 选取创建时间大于该时间的实例，时间格式为2021-03-10 14:00:00 |
| EndTime      | 否   | string | 选取创建时间小于该时间的实例，时间格式为2021-03-10 15:00:00 |

## 3.请求示例

```python
def get_haproxyInstances_list():
    """
    获取haproxy实例列表(支持常见字段过滤、instance_uuid/instance_name/ip)
    """
    action = "DescribeLoadBalancers"
    method = "GET"
    param = {
        "IP": "66.66",  # 可选字段
        "InstanceName": "haproxy"  # 可选字段
    }
    url = get_signature(action, AK, AccessKeySecret, method, HAPROXY_URL, param)
    res = requests.get(url)
    result = json.loads(res.content)
    print(result)
```

## 4.返回参数

| 参数名          | 类型         | 说明                                                         |
| :-------------- | :----------- | :----------------------------------------------------------- |
| Message         | string       | 信息描述                                                     |
| Code            | string       | 状态码                                                       |
| Data            | dict         | 数据                                                         |
| RelationService | dict         | 相关联的服务实例 (该服务这里为空)                            |
| CloneServices   | list         | 克隆的临时实例列表(该服务这里为空)                           |
| DisplayName     | string       | 站点名称                                                     |
| IP              | string       | 负载均衡实例的连接的IP，当有公网vip时，返回公网vip，没有公网vip时，返回内网vip |
| Port            | int          | 连接的端口                                                   |
| ProjectName     | string       | 项目名称                                                     |
| Cpu             | int          | cpu大小                                                      |
| Ram             | int          | 内存 单位M                                                   |
| RegionId        | string       | 站点编号                                                     |
| VdcId           | string       | 数据中心的编号                                               |
| VdcName         | string       | 数据中心名称                                                 |
| MasterInfo      | dict         | 从属集群，只读服务会有值                                     |
| LinkTypeStr     | string       | 链路类型名称                                                 |
| ro_groups       | list         | 只读实例列表(该服务这里为空)                                 |
| SubProductName  | string       | 子产品的名字                                                 |
| Version         | string       | 服务版本                                                     |
| LinkType        | string       | 单次支持最大规格的磁盘                                       |
| Status          | stringstring | 实例状态                                                     |
| StatusStr       | string       | 状态对应的中文                                               |
| InstanceUuid    | string       | 实例编号                                                     |
| InstanceName    | string       | 实例名称                                                     |
| CreatedTime     | string       | 实例创建时间                                                 |
| vips            | list         | 负载均衡多个vip地址信息                                      |
| ip              | string       | 其中一个vip地址                                              |
| type            | string       | 网络类型 内网/公网                                           |

## 5.返回示例

```python
{
    "Code": "Success",
    "Data": [{
        "CloneServices": null,
        "Cpu": 1,
        "CreatedTime": "2020-05-05 00:13:53",
        "DisplayName": "亚太地区-香港-可用区A",
        "IP": "66.66.0.52",
        "InstanceName": "*******",
        "InstanceUuid": "*************",
        "LinkType": "",
        "LinkTypeStr": "",
        "MasterInfo": "",
        "Port": 0,
        "ProjectName": "默认项目"
        "Ram": 2048,
        "RegionId": "CN_Hongkong_A",
        "RelationService": null,
        "ResourceId": "71bf731e-7cc8-4307-8408-4952e4dcd470",
        "RoGroups": null,
        "Status": "RUNNING",
        "StatusStr": "运行中",
        "SubProductName": "haproxy 主从版",
        "VdcId": "********",
        "VdcName": "香港PaaS1",
        "Version": "1.8.3"
        "Vips": [{
           "IP": "xx.xx.xx.xx",
           "Type": "private"
        },{
           "IP": "xx.xx.xx.xx",
           "Type": "public"
        }]
    }],
    "Message": "Success."
}
```

