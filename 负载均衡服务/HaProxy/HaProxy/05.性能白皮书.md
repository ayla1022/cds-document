### 性能白皮书

当前测试为 HTTP，如果是 HTTPS，支持的最大连接数会有所减少。

#### 测试数据

| 规格  | 配置最大连接数 | 模式 | 客户端数量 | 服务器端数量 | 总并发数 | 前端QPS | session-rate-max | session-rate-avg | 最大支持session-max | 平均支持session-max | 错误数量 | 描述                                                         |
| ----- | -------------- | ---- | ---------- | ------------ | -------- | ------- | ---------------- | ---------------- | ------------------- | ------------------- | -------- | ------------------------------------------------------------ |
| 1c2G  | 500000         | http | 2          | 10           | 2*100k   | 9800    | 18377            | 8500             | 50000               | 21000               | 0        | CPU基本没有空闲，建议限速session rate 5000，连接最大：5000   |
| 2c4G  | 500000         | http | 7          | 10           | 7*100k   | 920     | 19963            | 8000             | 200000              | 180000              | 0        | 最多支持7个客户端压测，再多系统就会出现wa迅速增加，而且sys也会增长 |
| 4c8G  | 500000         | http | 15         | 10           | 15*100k  | xx      | 28608            | 21000            | 360000              | 360000              | 0        | 建议限速session rate 400000，连接最大 400000，后端最大连接为 20000（继续压测的话，内存和HaProxy写入磁盘将会是瓶颈） |
| 8c16G | 800000         | http | 26         | 25           | 26*100k  | 641.12  | 25024            | 20000            | 70000               | 70000               | 0        | 建议限速session rate 700000，连接最大 700000，后端最大连接为 30000（继续压测的话，客户端程序报错，连接超时错误） |

#### 测试结果

##### 2C4G测试结果截图

![2c4g](pic/性能白皮书-2c4g.png)

##### 4C8G测试结果截图

![4c8g](pic/性能白皮书-4c8g.png)

##### 8C16G测试结果截图

![8c16g](pic/性能白皮书-8c16g.png)
