---
title: 缓存策略
date: 2022-04-07 11:08:20
permalink: /pages/17129022/
article: true
---

云数据库Memcached的缓存失效策略是LRU（最近最少使用）加上到期失效策略。

当向Memcached实例中存储数据时，可以根据业务需求设置数据的过期时间expire。过期时间可以设置为**0-30天**。

- 设置的过期时间为**0**，表示此数据不会主动过期（但是可能由于服务端为了给其他新的元素分配空间而被删除）。

- 设置的过期时间**超过30天**，存储时返回true，但是在取数据的时候取不到（这个key是1秒后过期的）。

如果Memcached实例内存使用完毕，则首先会替换掉已失效的数据，其次是最近最少使用的数据。

Memcached内部不会监视记录是否过期，而是在get时查看记录的时间戳，检查记录是否过期。，这种技术被称为惰性过期。因此，Memcached不会在过期监视上耗费CPU时间。

