---
title: 性能白皮书
date: 2021-12-06 17:00:00
permalink: /pages/746034/
article: true
---



## 测试工具

云数据库 MongoDB 采用的测试工具为 YCSB 。YCSB 下载安装方式，详情参见 [YCSB](https://github.com/brianfrankcooper/YCSB/tree/master/mongodb)。

## 测试环境

测试的云服务器与云数据库 MongoDB 在北京E可用区。

测试实例云服务器信息如下：

- 系统：ubuntu-16.04
- 配置：10C32G

## 测试方法

1. 准备数据。

   ```
   ./bin/ycsb load mongodb -s -P workloads/workloada  -p mongodb.url=mongodb://user:password@192.168.x.x:27017,192.168.x.x:27017,192.168.x.x:27017/admin?w=0 -p table=table -threads 300 -p recordcount=10000000 > outputLoad.txt
   ```

   > **说明**：
   >
   > - user:password：MongoDB 的账户名及密码
   > - database：MongoDB 账户创建时选择的库
   > - recordcount：加载到数据库的记录条数
   > - threads：客户端测试所用线程数总和

2. 进行 50% 读和 50% 更新性能压测。

   ```
   ./bin/ycsb run mongodb -s -P workloads/workloada  -p mongodb.url=mongodb://user:password@192.168.x.x:27017,192.168.x.x:27017,192.168.x.x:27017/database?w=0 -p table=table -p recordcount=10000000 -p readproportion=0.5 -p updateproportion=0.5 -p insertproportion=0 -p operationcount=100000 -threads 100 > outputRun.txt
   ```

## 测试结果

| 实例规格 | 单集合文档数 | 测试数据集（GB） | 实时QPS |
| :------- | :----------- | :--------------- | :------ |
| 1C2G     | 1000000      | 50GB             | 2989    |
| 2C4G     | 4000000      | 50GB             | 9647    |
| 4C8G     | 8000000      | 50GB             | 13183   |
| 8C16G    | 10000000     | 50GB             | 22136   |
| 8C32G    | 50000000     | 50GB             | 27564   |
