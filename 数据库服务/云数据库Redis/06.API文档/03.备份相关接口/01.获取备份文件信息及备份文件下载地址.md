---
title: 获取备份文件信息及备份文件下载地址
date: 2021-12-20 13:56:44
permalink: /pages/477043/
article: true
---

#### 1.接口描述

**Action**：DownloadBackup

**描述**：获取备份文件信息及备份文件下载地址

**请求地址**：cdsapi.capitalonline.net/redis

**请求方法**：GET

#### 2.请求参数

| 参数名       | 必选 | 类型   | 说明           |
| ------------ | ---- | ------ | -------------- |
| InstanceUuid | 是   | string | 实例编号       |
| BackupId     | 是   | string | 备份文件的编号 |

#### 3.返回参数

| 参数名                    | 类型   | 说明                                                     |
| ------------------------- | ------ | -------------------------------------------------------- |
| Message                   | string | 信息描述                                                 |
| Code                      | string | 状态码                                                   |
| Data                      | dict   | 数据                                                     |
| BackupId                  | string | 备份编号                                                 |
| Status                    | string | 备份状态                                                 |
| BackupType                | string | 备份的类型                                               |
| StartTime                 | string | 备份的开始时间                                           |
| EndTime                   | string | 备份的结束时间                                           |
| ShardId                   | string | 集群版分片id，其他产品为空字符串                         |
| BackupMode                | string | 备份的类型（自动或者手动备份）                           |
| BackupSize                | string | 备份文件大小，单位字节                                   |
| Desc                      | string | 备份的描述（手动备份可以自定义内容），自动备份为空字符串 |
| BackupDownloadUrl         | string | 公网下载地址                                             |
| BackupIntranetDownloadUrl | string | 同内网下载地址                                           |

#### 4.请求示例

```python
def get_redis_backups_download(instance_uuid,backup_id):
    """
    获取Redis实例备份详情
    """
    action = "DownloadBackup"
    method = "GET"
    param = {
        "InstanceUuid": instance_uuid,  # 实例ID
        "BackupId": backup_id,  # 备份ID
    }
    url = get_signature(action, AK, AccessKeySecret, method, REDIS_URL, param)
    res = requests.get(url)
    result = json.loads(res.content)
    result = json.dumps(result)  # json格式化
    print(result)
```

#### 5.返回示例

```python
{
    "Code": "Success",
    "Data": {
        "BackupDownloadUrl": "https:/***************************",
        "BackupId": "**********",
        "BackupIntranetDownloadUrl": "http://***************",
        "BackupMode": "manual",
        "BackupSize": 176,
        "BackupType": "full-backup",
        "Desc": "",
        "EndTime": "2020-08-21 15:59:02",
        "InstanceId": "*************",
        "ShardId": "*************",
        "StartTime": "2020-08-21 15:58:45",
        "Status": "finished"
    },
    "Message": "success",
    "TaskId": ""
}
```

