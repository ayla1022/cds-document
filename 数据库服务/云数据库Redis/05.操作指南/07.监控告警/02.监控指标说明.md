---
title: 监控指标说明
date: 2021-12-14 14:48:27
permalink: /pages/477026/
article: true
---

云数据库Redis支持丰富的监控指标。

## 社区主从版监控指标

<table width="95%" border="1" cellpadding="2" cellspacing="1">
    <thead>
        <tr>
            <th align="left" width=”18%“>指标分类</th>
            <th width="16%">指标中文名</th>
            <th width="16%">指标英文名</th>
            <th width="8%">单位</th>
            <th width="42%">指标说明</th>
        </tr>
    </thead>
    <tbody>
        <tr>
        	<td rowspan="1">
        	   <p>CPU</p>
        	</td>
            <td>CPU使用率</td>
            <td>cpu_us_min</td>
            <td>%</td>
            <td>平均CPU使用率</td>
        </tr>
        <tr>
        	<td rowspan="5">
        	   <p>内存</p>
        	</td>
            <td>内存使用量</td>
            <td>mem_us</td>
            <td>MB</td>
            <td>实际使用内存容量，包含数据和缓存部分</td>
        </tr>
        <tr>
            <td>内存使用率</td>
            <td>mem_us_min</td>
            <td>%</td>
            <td>实际使用内存和申请总内存之比</td>
        </tr>
        <tr>
            <td>Key总个数</td>
            <td>keys_min</td>
            <td>个</td>
            <td>实例存储的总Key个数（一级Key）</td>
        </tr>
        <tr>
            <td>Key过期数</td>
            <td>expired_keys_min</td>
            <td>个</td>
            <td>时间窗内被淘汰的Key个数，对应info命令输出的expired_keys</td>
        </tr>
        <tr>
            <td>Key驱逐数</td>
            <td>evicted_keys_min</td>
            <td>个</td>
            <td>时间窗内被驱逐的Key个数，对应info命令输出的evicted_keys</td>
        </tr>
        <tr>
        	<td rowspan="5">
        	   <p>网络</p>
        	</td>
            <td>连接数</td>
            <td>connections_min</td>
            <td>个</td>
            <td>连接到实例的TCP连接数量</td>
        </tr>
        <tr>
            <td>入流量</td>
            <td>in_flow_min</td>
            <td>Mb/s</td>
            <td>内网入流量</td>
        </tr>
        <tr>
            <td>入流量使用率</td>
            <td>in_flow_us_min</td>
            <td>%</td>
            <td>内网入流量使用比例</td>
        </tr>
        <tr>
            <td>出流量</td>
            <td>out_flow_min</td>
            <td>Mb/s</td>
            <td>内网出流量</td>
        </tr>
        <tr>
            <td>出流量使用率</td>
            <td>out_flow_us_min</td>
            <td>%</td>
            <td>内网出流量使用比例</td>
        </tr>
        <tr>
        	<td rowspan="4">
        	   <p>时延</p>
        	</td>
            <td>平均执行时延</td>
            <td>latency_min</td>
            <td>ms</td>
            <td>proxy到redis server的执行时延平均值</td>
        </tr>
        <tr>
            <td>读平均时延</td>
            <td>latency_get_min</td>
            <td>ms</td>
            <td>proxy到redis server的读命令平均执行时延</td>
        </tr>
        <tr>
            <td>写平均时延</td>
            <td>latency_set_min</td>
            <td>ms</td>
            <td>proxy到redis server的写命令平均执行时延</td>
        </tr>
        <tr>
            <td>其他平均时延</td>
            <td>latency_other_min</td>
            <td>ms</td>
            <td>proxy到redis server的读写命令之外的命令平均执行时延</td>
        </tr>
        <tr>
        	<td rowspan="4">
        	   <p>请求</p>
        	</td>
            <td>总请求</td>
            <td>qps_min</td>
            <td>次/秒</td>
            <td>QPS，命令执行次数</td>
        </tr>
        <tr>
            <td>读请求</td>
            <td>stat_get_min</td>
            <td>次/秒</td>
            <td>读命令执行次数，读命令分类详情参见下方命令分类</td>
        </tr>
        <tr>
            <td>写请求</td>
            <td>stat_set_min</td>
            <td>次/秒</td>
            <td>写命令执行次数，写命令分类详情参见下方命令分类</td>
        </tr>
        <tr>
            <td>其他请求</td>
            <td>stat_other_min</td>
            <td>次/秒</td>
            <td>读写命令之外的命令执行次数</td>
        </tr>
        <tr>
        	<td rowspan="4">
        	   <p>响应</p>
        	</td>
            <td>慢查询</td>
            <td>slow_query_min</td>
            <td>个</td>
            <td>慢查询命令次数</td>
        </tr>
        <tr>
        	<td>读请求命中</td>
            <td>stat_success_min</td>
            <td>个</td>
            <td>读请求Key存在的个数，对应info命令输出的keyspace_hits指标</td>
        </tr>
        <tr>
        	<td>读请求Miss</td>
            <td>stat_missed_min</td>
            <td>个</td>
            <td>读请求Key不存在的个数，对应info命令输出的keyspace_misses指标</td>
        </tr>
        <tr>
        	<td>读请求命中率</td>
            <td>cache_hit_ratio_min</td>
            <td>%</td>
            <td>Key命中/(Key命中+KeyMiss)，该指标可以反应Cache Miss的情况，当访问为0时，该值为 null</td>
        </tr>
    </tbody>
</table>


## 社区集群版监控指标

- **总体监控指标**

<table width="95%" border="1" cellpadding="2" cellspacing="1">
    <thead>
        <tr>
            <th align="left" width=”18%“>指标分类</th>
            <th width="16%">指标中文名</th>
            <th width="16%">指标英文名</th>
            <th width="8%">单位</th>
            <th width="42%">指标说明</th>
        </tr>
    </thead>
    <tbody>
        <tr>
        	<td rowspan="2">
        	   <p>CPU</p>
        	</td>
            <td>CPU使用率</td>
            <td>cpu_us_min</td>
            <td>%</td>
            <td>平均CPU使用率</td>
        </tr>
        <tr>
            <td>分片最大CPU使用率</td>
            <td>cpu_max_us_min</td>
            <td>%</td>
            <td>集群所有分片中CPU使用率最高值拼成</td>
        </tr>
        <tr>
        	<td rowspan="6">
        	   <p>内存</p>
        	</td>
            <td>内存使用量</td>
            <td>mem_us</td>
            <td>MB</td>
            <td>实际使用内存容量，包含数据和缓存部分</td>
        </tr>
        <tr>
            <td>内存使用率</td>
            <td>mem_us_min</td>
            <td>%</td>
            <td>实际使用内存和申请总内存之比，实际使用内存/Max memory</td>
        </tr>
        <tr>
            <td>分片最大内存使用率</td>
            <td>storage_max_us_min</td>
            <td>%</td>
            <td>集群所有分片中内存使用率最高值</td>
        </tr>
         <tr>
            <td>Key总个数</td>
            <td>keys_min</td>
            <td>个</td>
            <td>实例存储的总Key个数（一级Key）</td>
        </tr>
        <tr>
            <td>Key过期数</td>
            <td>expired_keys_min</td>
            <td>个</td>
            <td>时间窗内被淘汰的Key个数，对应info命令输出的expired_keys</td>
        </tr>
        <tr>
            <td>Key驱逐数</td>
            <td>evicted_keys_min</td>
            <td>个</td>
            <td>时间窗内被驱逐的Key个数，对应info命令输出的evicted_keys</td>
        </tr>
        <tr>
        	<td rowspan="5">
        	   <p>网络</p>
        	</td>
            <td>连接数</td>
            <td>connections_min</td>
            <td>个</td>
            <td>连接到实例的TCP连接数量</td>
        </tr>
        <tr>
            <td>入流量</td>
            <td>in_flow_min</td>
            <td>Mb/s</td>
            <td>内网入流量</td>
        </tr>
        <tr>
            <td>入流量使用率</td>
            <td>in_flow_us_min</td>
            <td>%</td>
            <td>内网入流量使用比例，入流量总流量</td>
        </tr>
        <tr>
            <td>出流量</td>
            <td>out_flow_min</td>
            <td>Mb/s</td>
            <td>内网出流量</td>
        </tr>
        <tr>
            <td>出流量使用率</td>
            <td>out_flow_us_min</td>
            <td>%</td>
            <td>内网出流量使用比例，出流量总流量</td>
        </tr>
        <tr>
        	<td rowspan="4">
        	   <p>时延</p>
        	</td>
            <td>平均执行时延</td>
            <td>latency_min</td>
            <td>ms</td>
            <td>proxy到redis server的执行时延平均值</td>
        </tr>
        <tr>
            <td>读平均时延</td>
            <td>latency_get_min</td>
            <td>ms</td>
            <td>proxy到redis server的读命令平均执行时延</td>
        </tr>
        <tr>
            <td>写平均时延</td>
            <td>latency_set_min</td>
            <td>ms</td>
            <td>proxy到redis server的写命令平均执行时延</td>
        </tr>
        <tr>
            <td>其他平均时延</td>
            <td>latency_other_min</td>
            <td>ms</td>
            <td>proxy到redis server的读写命令之外的命令平均执行时延</td>
        </tr>
        <tr>
        	<td rowspan="4">
        	   <p>请求</p>
        	</td>
            <td>总请求</td>
            <td>qps_min</td>
            <td>次/秒</td>
            <td>QPS，命令执行次数</td>
        </tr>
        <tr>
            <td>读请求</td>
            <td>stat_get_min</td>
            <td>次/秒</td>
            <td>读命令执行次数，读命令分类详情参见下方命令分类</td>
        </tr>
        <tr>
            <td>写请求</td>
            <td>stat_set_min</td>
            <td>次/秒</td>
            <td>写命令执行次数，写命令分类详情参见下方命令分类</td>
        </tr>
        <tr>
            <td>其他请求</td>
            <td>stat_other_min</td>
            <td>次/秒</td>
            <td>读写命令之外的命令执行次数</td>
        </tr>
        <tr>
        	<td rowspan="4">
        	   <p>响应</p>
        	</td>
            <td>慢查询</td>
            <td>slow_query_min</td>
            <td>个</td>
            <td>慢查询命令次数</td>
        </tr>
        <tr>
            <td>读请求命中</td>
            <td>stat_success_min</td>
            <td>个</td>
            <td>读请求Key存在的个数，对应info命令输出的keyspace_hits指标</td>
        </tr>
        <tr>
            <td>读请求Miss</td>
            <td>stat_missed_min</td>
            <td>个</td>
            <td>读请求Key不存在的个数，对应info命令输出的keyspace_misses指标</td>
        </tr>
        <tr>
            <td>读请求命中率</td>
            <td>cache_hit_ratio_min</td>
            <td>%</td>
            <td>Key命中/(Key命中+KeyMiss)，该指标可以反应Cache Miss的情况，当访问为0时，该值为 null</td>
        </tr>
    </tbody>
</table>




- **分片监控指标**

<table width="95%" border="1" cellpadding="2" cellspacing="1">
    <thead>
        <tr>
            <th align="left" width=”18%“>指标分类</th>
            <th width="16%">指标中文名</th>
            <th width="16%">指标英文名</th>
            <th width="8%">单位</th>
            <th width="42%">指标说明</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td rowspan="1">
        	   <p>CPU</p>
        	</td>
            <td>CPU使用率</td>
            <td>shard_cpu_us_min</td>
            <td>%</td>
            <td>平均CPU使用率</td>
        </tr>
        <tr>
            <td rowspan="5">
        	   <p>内存</p>
        	</td>
            <td>内存使用量</td>
            <td>shard_mem_us</td>
            <td>MB</td>
            <td>实际使用内存容量，包含数据和缓存部分</td>
        </tr>
        <tr>
            <td>内存使用率</td>
            <td>shard_mem_us_min</td>
            <td>%</td>
            <td>实际使用内存和申请总内存之比，实际使用内存/Max memory</td>
        </tr>
        <tr>
            <td>Key总个数</td>
            <td>shard_keys_min</td>
            <td>个</td>
            <td>实例存储的总Key数（一级Key）</td>
        </tr>
        <tr>
            <td>key过期数</td>
            <td>shard_expired_keys_min</td>
            <td>个</td>
            <td>时间窗内被淘汰的Key个数，对应info命令输出的expired_keys</td>
        </tr>
        <tr>
            <td>key驱逐数</td>
            <td>shard_evicted_keys_min</td>
            <td>个</td>
            <td>时间窗内被驱逐的Key个数，对应info命令输出的evicted_keys</td>
        </tr>
        <tr>
            <td rowspan="4">
        	   <p>请求</p>
        	</td>
            <td>总请求</td>
            <td>shard_qps_min</td>
            <td>次/秒</td>
            <td>QPS，命令执行次数</td>
        </tr>
        <tr>
            <td>读请求</td>
            <td>shard_start_get_min</td>
            <td>次/秒</td>
            <td>读命令执行次数，读命令分类详情参见下方命令分类</td>
        </tr>
        <tr>
            <td>写请求</td>
            <td>shard_stat_set_min</td>
            <td>次/秒</td>
            <td>写命令执行次数，写命令分类详情参见下方命令分类</td>
        </tr>
        <tr>
            <td>其他请求</td>
            <td>shard_stat_other_min</td>
            <td>次/秒</td>
            <td>读写命令之外的命令执行次数</td>
        </tr>
        <tr>
            <td rowspan="4">
        	   <p>响应</p>
        	</td>
            <td>慢查询</td>
            <td>shard_slow_query_min</td>
            <td>个</td>
            <td>慢查询命令次数</td>
        </tr>
        <tr>
            <td>读请求命中</td>
            <td>shard_stat_success_min</td>
            <td>个</td>
            <td>读请求Key存在的个数，对应info命令输出的keyspace_hits指标</td>
        </tr>
        <tr>
            <td>读请求Miss</td>
            <td>shard_stat_missed_min</td>
            <td>个</td>
            <td>读请求Key不存在的个数，对应info命令输出的keyspace_misses指标</td>
        </tr>
        <tr>
            <td>读请求命中率</td>
            <td>shard_cache_hit_ratio_min</td>
            <td>%</td>
            <td>Key命中/(Key 命中 + KeyMiss)，该指标可以反应Cache Miss的情况，当访问为0时，该值为 null</td>
        </tr>
    </tbody>
</table>

## 命令分类

<table style="width:100% !important;word-break:keep-all;white-space:nowrap;" border="1" cellpadding="2" cellspacing="1">
	<thead align="left">
        <tr>
        	<th>类型</th>
            <th>命令</th>
        </tr>
	</thead>
    <tbody align="left">
        <tr>
        	<td>读命令</td>
            <td style="word-wrap: break-word;word-break:break-all;white-space:normal;">get,strlen,exists,getbit,getrange,mget,llen,lindex,lrange,sismember,scard,srandmember,sinter,sunion,sdiff,smembers,sscan,zrange,zrangebyscore,zrevrangebyscore,zrangebylex,zrevrangebylex,zcount,zlexcount,zrevrange,zcard,zscore,zrank,zrevrank,zscan,hget,hmget,hlen,hstrlen,hkeys,hvals,hgetall,hexists,hscan,randomkey,keys,scan,type,ttl,touch,pttl,dump,object,bitcount,bitpos,geohash,geopos,geodist,pfcount,xinfo,xadd,xtrim,xdel,xrange,xrevrange,xlen,xread,xgroup,xreadgroup,xack,xlclaim,xpending,xautoclaim,xblockread,xblockreadgroup,script exists
            </td>
        </tr>
        <tr>
        	<td>写命令</td>
            <td style="word-wrap: break-word;word-break:break-all;white-space:normal;">set,setnx,setex,psetex,append,del,unlink,setbit,bitfield,setrange,incr,decr,rpush,lpush,rpushx,lpushx,linsert,rpop,lpop,brpop,brpoplpush,blpop,lset,ltrim,lrem,rpoplpush,sadd,srem,smove,spop,sinterstore,sunionstore,sdiffstore,zadd,zincrby,zrem,zremrangebyscore,zremrangebyrank,zremrangebylex,zunionstore,zinterstore,hset,hsetnx,hmset,hincrby,hincrbyfloat,hdel,incrby,decrby,incrbyfloat,getset,mset,msetnx,swapdb,move,rename,renamenx,expire,expireat,pexpire,pexpireat,sort,persist,restore,migrate,bitop,geoadd,georadius,georadiusbymember,pfadd,pfmerge,zpopmax,zpopmin,bzpopmax,bzpopmin
            </td>
        </tr>
	</tbody>
</table>
