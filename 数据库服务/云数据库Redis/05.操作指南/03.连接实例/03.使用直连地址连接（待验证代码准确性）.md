---
title:使用直连地址连接
date: 2021-12-31 17:02:02
permalink: /pages/477061/
article: true
---

开通直连访问后，您可以绕过代理，用直连模式访问云数据库Redis集群版实例。

## 前提条件

- 成功购买Redis实例，实例状态为运行中。购买Redis实例，详情参见[创建实例](./../../04.快速入门/00.创建Redis实例.md)。
- 已在同一虚拟数据中心下成功购买云服务器，并将与云数据库Redis在同一私网网段的云服务器私网IP添加至Redis实例的白名单中，详情参见[设置白名单](./../../04.快速入门/01.设置白名单.md)。
- 您已开通直连访问，开通步骤详情参见[设置直连访问](./../../05.操作指南/02.管理实例/01.设置直连访问.md)。

## 使用直连地址连接

> 注意：
>
> - 使用直连地址访问时，必须使用直连密码认证连接。

### Jedis客户端直连示例

```java
 import java.util.HashSet;
 import java.util.Set;
 import redis.clients.jedis.HostAndPort;
 import redis.clients.jedis.JedisCluster;

   public class TestJedisCluster {

public static void main(String[] args) {
    //创建JedisCluster客户端
    //创建一个set集合，用来封装所有redis节点的信息
    Set<HostAndPort> nodes = new HashSet<>();
    
    nodes.add(new HostAndPort("10.XX.XX.12", 6379));
    nodes.add(new HostAndPort("10.XX.XX.13", 6379));
    nodes.add(new HostAndPort("10.XX.XX.14", 6379));
    nodes.add(new HostAndPort("10.XX.XX.15", 6379));
    nodes.add(new HostAndPort("10.XX.XX.16", 6379));
    nodes.add(new HostAndPort("10.XX.XX.17", 6379));
    nodes.add(new HostAndPort("10.XX.XX.18", 6379));
    nodes.add(new HostAndPort("10.XX.XX.19", 6379));  
    JedisCluster cluster = new JedisCluster(nodes);
    //执行JedisCluster对象中的方法，方法和redis一一对应。
    cluster.set("cluster-test", "my jedis cluster test");
    String result = cluster.get("cluster-test");
    System.out.println(result);
    //程序结束时需要关闭JedisCluster对象
    cluster.close();
    }
}
```

### redis-py客户端直连示例

```python
#python2.7.x
#redis-4.0.X
#redis-py-cluster (1.3.6)
from rediscluster import StrictRedisCluster
import sys
def redis_cluster():
    redis_nodes = [{'host':'10.XX.XX.12','port':6379},
                   {'host':'10.XX.XX.13','port':6379},
                   {'host':'10.XX.XX.14','port':6379},
                   {'host':'10.XX.XX.15','port':6379},
                   {'host':'10.XX.XX.16','port':6379},
                   {'host':'10.XX.XX.17','port':6379},
                   {'host':'10.XX.XX.18','port':6379},
                   {'host':'10.XX.XX.19','port':6379}
                  ]
    try:
        redisconn = StrictRedisCluster(startup_nodes=redis_nodes,password='directpwd')
    except Exception,e:
        print(e)
        sys.exit(1)

    redisconn.set('name','caonima')
    print "name value is:", redisconn.get('name')

redis_cluster()
```

