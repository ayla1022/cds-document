---
title: 监控指标说明
date: 2021-12-03 17:00:00
permalink: /pages/1206039/
article: true
---


云数据库 MySQL 支持监控运行状态下的实例，将数据可视化展示为图表形式。监控最多保存 90 天数据，监控粒度根据时间跨度自适应调整，监控粒度解释，详情参见 [监控粒度](#监控粒度)。

您可以通过 [云数据库 MySQL 控制台](https://console.capitalonline.net/dbinstances) 查看云数据库 MySQL 的监控，查看云数据库 MySQL 监控步骤详情参见 [监控功能](./00.监控功能.md)。

## 监控粒度

目前首云 MySQL 实例监控实行自适应策略，暂不支持自定义选择。监控粒度详情如下：

| 时间跨度   | 监控粒度 | 自适应说明                                              | 保留时长 |
| :--------- | :------- | :------------------------------------------------------ | :------- |
| (0h, 4h]   | 30 s     | 时间跨度在 4 小时内，监控粒度为 30 秒                   | 90天     |
| (4h, 2d]   | 1 min    | 时间跨度超过 4 小时，但在 2 天内，监控粒度调整为 1 分钟 | 90天     |
| (2d, 10d]  | 5 min    | 时间跨度超过 2 天，但在 10 天内，监控粒度调整为 5 分钟  | 90天     |
| (10d, 30d] | 1 h      | 时间跨度超过 10 天，但在 30 天内，监控粒度调整为 1 小时 | 90天     |

## 监控分类

- **资源监控**：支持查看 CPU、内存、磁盘及网络相关的监控数据。
- **引擎监控**：支持查看连接、访问、Innodb、表等相关的监控数据，方便您诊断故障及性能优化。
- **引擎监控（扩展）**：支持查看更丰富的引擎相关监控指标，帮助您最大限度发现数据库存在或潜在的健康问题。
- **部署监控**：提供主从延迟相关监控指标。
  - **高可用版**：用于反映主实例与其从节点的延迟距离及时间，若主实例存在故障时，其监控实例对应的从节点可快速提升为主实例。
  - **只读实例**：用于反映主实例与其只读节点的延迟距离及时间。

## 监控指标

### 资源监控

| 指标名称              | 单位  | 说明                                       |
| :-------------------- | :---- | :----------------------------------------- |
| CPU利用率             | %     | 允许闲时超用，CPU 利用率可能大于 100%      |
| 内存使用率            | %     | 允许闲时超用，内存利用率可能大于 100%      |
| 内存占用              | MB    | 允许闲时超用，实际内存占用可能大于购买规格 |
| 磁盘使用率            | %     | 磁盘使用空间/实例购买空间                  |
| 磁盘读IOPS            | 次/秒 | 磁盘每秒读 IOPS                            |
| 磁盘写IOPS            | 次/秒 | 磁盘每秒写 IOPS                            |
| 磁盘读延迟            | %     | 磁盘读延迟率                               |
| 磁盘写延迟            | %     | 磁盘写延迟率                               |
| 磁盘读 I/O 数据量速率 | MB/秒 | 磁盘每秒读 I/O 数据量速率                  |
| 磁盘写 I/O 数据量速率 | MB/秒 | 磁盘每秒写 I/O 数据量速率                  |
| 磁盘占用空间          | MB    | 磁盘当前占用空间                           |
| 内网入流量            | MB/秒 | 实例每秒访问内网的入流量                   |
| 内网出流量            | MB/秒 | 实例每秒访问内网的出流量                   |

### 引擎监控

| 指标名称            | 单位  | 说明                                                         |
| :------------------ | :---- | :----------------------------------------------------------- |
| 当前打开连接数      | 个    | 当前打开的连接的数量                                         |
| 连接数使用率        | %     | 当前打开连接数/最大连接数                                    |
| 每秒执行操作数      | 次/秒 | 数据库每秒执行的 SQL 数（含 insert、select、update、delete、replace），QPS 指标主要体现云数据库 MySQL 实例的实际处理能力 |
| 最大连接数          | 个    | 最大连接数                                                   |
| 每秒提交的事务数量  | 次/秒 | 数据库每秒提交的事务数量, 覆盖 commit 和 rollback 语句       |
| 查询缓存命中率      | %     | 查询缓存命中率                                               |
| 慢查询数            | 次    | 查询时间超过 long_query_time 秒的查询的个数                  |
| 全表扫描数          | 次/秒 | 执行全表搜索查询的数量                                       |
| 查询数              | 次/秒 | 每秒查询数                                                   |
| 更新数              | 次/秒 | 每秒更新数                                                   |
| 删除数              | 次/秒 | 每秒删除数                                                   |
| 插入数              | 次/秒 | 每秒插入数                                                   |
| 覆盖数              | 次/秒 | 每秒覆盖数                                                   |
| 总请求数            | 次/秒 | 所有执行的 SQL 语句，包括 set，show 等                       |
| 发送数据量          | KB/秒 | 每秒发送的数据量                                             |
| 接收数据量          | KB/秒 | 每秒接受的数据量                                             |
| 查询缓存使用率      | %     | 查询缓存使用率                                               |
| Innodb 缓存命中率   | %     | Innodb 引擎的缓存命中率                                      |
| Innodb 读磁盘数量   | 次/秒 | Innodb 引擎每秒读磁盘文件的次数                              |
| Innodb 写磁盘数量   | 次/秒 | Innodb 引擎每秒写磁盘文件的次数                              |
| Innodb fsync 数量   | 次/秒 | Innodb 引擎每秒调用 fsync 函数次数                           |
| Innodb 打开表的数量 | 个    | Innodb 引擎当前打开表的数量                                  |
| 等待表锁次数        | 次/秒 | 不能立即获得的表的锁的次数。如果该值较高，并且有性能问题，您应首先优化查询，然后拆分表或使用复制 |
| 内存临时表数量      | 次/秒 | 每秒创建内存临时表的次数                                     |
| 立即释放的表锁数    | 次/秒 | 可以立即获取锁的次数                                         |

### 引擎监控（拓展）

| 指标名称                | 单位    | 说明                                    |
| :---------------------- | :------ | :-------------------------------------- |
| 临时文件数量            | 次/秒   | 每秒创建临时文件的次数                  |
| 磁盘临时表数量          | 次/秒   | 每秒创建磁盘临时表的次数                |
| 已经打开的表数          | 个      | 实例维度打开表数量                      |
| 提交数                  | 次/秒   | 每秒提交次数                            |
| 回滚数                  | 次/秒   | 每秒回滚次数                            |
| 已创建的线程数          | 个      | 创建用来处理连接的线程数                |
| 运行的线程数            | 个      | 激活的（非睡眠状态）线程数              |
| 读下一行请求数          | 次/秒   | 每秒读取下一行的请求次数                |
| 内部回滚数              | 次/秒   | 每秒事务被回滚的次数                    |
| 内部提交数              | 次/秒   | 每秒事务提交的次数                      |
| Innodb 空页数           | 个      | Innodb 引擎内存空页个数                 |
| Innodb 逻辑读           | 次/秒   | Innodb 引擎每秒已经完成的逻辑读请求次数 |
| Innodb 物理读           | 次/秒   | Innodb 引擎每秒已经完成的物理读请求次数 |
| Innodb 读取量           | Byte/秒 | Innodb 引擎每秒已经完成读取数据的字节数 |
| Innodb 总读取量         | 次/秒   | Innodb 引擎每秒已经完成读取数据的次数   |
| Innodb 总写入量         | 次/秒   | Innodb 引擎每秒已经完成写数据的次数     |
| Innodb 写入量           | Byte/秒 | Innodb 引擎每秒已经完成写数据的字节数   |
| Innodb 行删除量         | 次/秒   | Innodb 引擎每秒删除的行数               |
| Innodb 行插入量         | 次/秒   | Innodb 引擎每秒插入的行数               |
| Innodb 行更新量         | 次/秒   | Innodb 引擎每秒更新的行数               |
| Innodb 平均获取行锁时间 | 毫秒    | Innodb 引擎行锁定的平均时长             |
| Innodb 等待行锁次数     | 次/秒   | Innodb 引擎每秒等待行锁定的次数         |
| Innodb 行读取量         | 次/秒   | Innodb 引擎每秒读取的行数               |
| 键缓存内未使用的块数量  | 个      | myisam 引擎未使用键缓存块的个数         |
| 键缓存内使用的块数量    | 个      | myisam 引擎已使用键缓存块的个数         |
| 键缓存读取数据块次数    | 次/秒   | myisam 引擎每秒读取键缓存块的次数       |
| 硬盘读取数据块次数      | 次/秒   | myisam 引擎每秒读取硬盘数据块的次数     |
| 数据块写入键缓冲次数    | 次/秒   | myisam 引擎每秒写键缓存块的次数         |
| 数据块写入磁盘次数      | 次/秒   | myisam 引擎每秒写硬盘数据块的次数       |
| 打开的文件总数          | 个      | 当前打开的文件的数量                    |
| 日志使用量              | MB      | binlog 使用量                           |

### 部署监控

| 指标名称     | 单位                                | 说明             |
| :----------- | :---------------------------------- | :--------------- |
| 主从延迟距离 | MB                                  | 主从 binlog 差距 |
| 主从延迟时间 | 秒                                  | 主从延迟时间     |
| IO 线程状态  | 状态值（0-Yes，1-No，2-Connecting）  | IO 线程运行状态  |
| SQL 线程状态 | 状态值（0-Yes，1-No）                | SQL 线程运行状态 |
