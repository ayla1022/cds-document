### 调整配置

#### 操作场景

根据您的业务情况，您可以在控制台灵活修改您的 MySQL 实例配置，从而降低成本以及使资源得到充分利用。调整资源费用变更详情参见[调整实例费用说明](http://wiki-private.capitalonline.net:8090/pages/viewpage.action?pageId=75826693)。

#### 配置规则

- MySQL 实例状态为运行中
- 配置变更中状态禁止再进行调整配置操作
- 配置变更中状态禁止进行用户权限管理
- 配置变更中状态应尽可能避免修改参数
- 配置变更时，可能会进行数据迁移，期间实例访问不受影响
- 迁移完成后会进行切换，会有10s左右闪断，请确保业务具备重连机制。建议在实例维护时间内进行切换
- MySQL基础版，在调整配置过程中，存在大约5分钟实例不可用的情况，建议在业务低峰期操作
- 存储类型在实例创建时已经确定，不可更改，只能添加相同类型硬盘，且存储空间无法降低
- 加存储空间时不能超过该规格的存储空间限制，存储大小可选范围为0-2000G（单盘），但最高可以添加13块硬盘
- 为了保障磁盘性能相同，添加硬盘时，预置性能包份数与创建时一致

#### 操作步骤

1.登录控制台，在实例列表中选择需要调整资源的实例，点击实例名称进入实例管理页面。

2.在基本信息中找到规格配置模块，点击“计算规格”后的【修改】或“存储大小”后的【添加】。

![img](http://wiki-private.capitalonline.net:8090/download/thumbnails/75827089/image2021-4-20_11-10-0.png?version=1&modificationDate=1618888199000&api=v2)

3.在调整配置页面选择您要调整的配置，确认后点击【确认】即可。

![img](http://wiki-private.capitalonline.net:8090/download/attachments/75827089/image2021-4-20_11-20-12.png?version=1&modificationDate=1618888810000&api=v2)

#### 常见问题

##### 1.调整数据库实例规格，对实例有什么影响吗？

- MySQL 主从版在调整配置过程中，可能会进行数据迁移，迁移期间实例访问不受影响；迁移完成后会进行切换，会有10s左右闪断，请确保业务具备重连机制。
- MySQL基础版，在调整配置过程中，存在大约5分钟实例不可用的情况，建议在业务低峰期操作。

##### 2.为什么我的数据库无法降配？

存储类型在实例创建时已经确定，不可更改，且存储空间无法降低。

##### 3.控制台调整配置后，为什么还显示“运行中”状态？

有可能是您在控制台调整配置时，选择的“执行时间”为“可维护时间内”，导致无法立即执行。 如您需立即切换，可在实例管理页的“基本信息”下找到”维护信息“模块点击【查看维护时间任务】，在弹出的窗口中选择您刚才调整配置任务，点击【编辑】进行重新配置即可。切换会有秒级别闪断，请确保业务具备重连机制。

##### 4.调整实例配置后，我需要等待多长时间才能生效？

数据库的升级时间和您当前数据库中的数据量的大小以及数据复制读有关，具体时间无法进行预估。
升级过程中不会影响您当前实例的正常使用，在升级完成切换时会有秒级的瞬断。
