### 配置自动重连

本文将介绍云数据库 MySQL 实例在切换时出现的闪断问题影响，以及如何配置自动重连。

#### 操作背景

云数据库 MySQL 在对 MySQL 实例调整配置或主实例因负载过高 hang 住以及硬件故障等时，可能涉及到实例切换，实例在切换时会出现秒级别的连接闪断。

当主备切换时，应用程序若未配置自动重连功能，将会出现应用连接异常，影响业务正常访问。 建议您在应用程序配置自动重连功能，并且对实例操作尽量在维护时间内进行。

#### 配置操作

避免因主备切换而影响应用连接异常，建议您配置云数据库 MySQL 的参数实现自动重连功能，在”参数配置“中配置 connectTimeOut 和 socketTimeOut 参数。

请根据实际业务场景合理设置参数值，基于 OLTP（On-Line Transaction Processing）的业务场景建议统一设置为20秒。

##### 说明：

- connectTimeOut：应用程序与数据库服务器建立 TCP 连接的超时时间，建议至少大于应用程序到数据库服务器的响应时间。
- socketTimeOut：通过 TCP 连接发送数据包后，等待响应的超时时间，建议设置为单条 SQL 最长执行时间。
