---
title: 性能白皮书
date: 2021-12-03 17:00:00
permalink: /pages/1206048/
article: true
---


## 测试工具

云数据库 MySQL 采用的测试工具为 SysBench 。SysBench是一个跨平台且支持多线程的模块化基准测试工具，用于评估系统在运行高负载的数据库时相关核心参数的性能表现。

### 安装SysBench

+ Ubuntu 系统：

  ```
  curl -s https://packagecloud.io/install/repositories/akopytov/sysbench/script.deb.sh | sudo bash
  sudo apt -y install sysbench
  ```

+ CentOS 系统：

  ```
  curl -s https://packagecloud.io/install/repositories/akopytov/sysbench/script.rpm.sh | sudo bash
  sudo yum -y install sysbench
  ```

## 测试环境

测试的云服务器与云数据库 MySQL 在北京E可用区。

测试实例云服务器信息如下：

+ 系统：ubuntu-16.04
+ 配置：10C32G

## 测试方法

### 操作步骤

1. 准备数据

   ```
   sysbench oltp_common.lua --tables=10 --table-size=2000000 --threads=300 --max-requests=0 --report-interval=10 prepare
   ```

2. 压测命令

   ```
   sysbench oltp_read_write.lua --tables=10 --table-size=2000000 --threads=300 --time=300 --max-requests=0 --report-interval=10 run
   ```

## 测试结果

<table style="width:80% !important;" border="1" cellpadding="2" cellspacing="1">
	<thead align="left">
        <tr>
        	<th>规格</th>
            <th>测试类型</th>
            <th>thread数</th>
            <th>QPS</th>
            <th>TPS</th>
            <th>连接数</th>
            <th>IOPS</th>
        </tr>
	</thead>
    <tbody align="left">
        <tr>
        	<td rowspan="3">2C4G</td>
            <td>read_only</td>
            <td>64</td>
            <td>10898.28</td>
            <td>681.14</td>
            <td rowspan="3">800</td>
            <td rowspan="12">3000</td>
        </tr>
        <tr>
        	<td>write_only</td>
            <td>64</td>
            <td>10781.06</td>
            <td>1796.8</td>
        </tr>
        <tr>
        	<td>read_write</td>
            <td>64</td>
            <td>10198.33</td>
            <td>598.98</td>
        </tr>
        <tr>
        	<td rowspan="3">4C8G</td>
            <td>read_only</td>
            <td>64</td>
            <td>23898.15</td>
            <td>1498.34</td>
            <td rowspan="3">1600</td>
        </tr>
        <tr>
        	<td>write_only</td>
            <td>64</td>
            <td>14545.45</td>
            <td>2358.34</td>
        </tr>
        <tr>
        	<td>read_write</td>
            <td>64</td>
            <td>12598.34</td>
            <td>634.34</td>
        </tr>
        <tr>
        	<td rowspan="3">8C16G</td>
            <td>read_only</td>
            <td>128</td>
            <td>39874.34</td>
            <td>2654.56</td>
            <td rowspan="3">3200</td>
        </tr>
        <tr>
        	<td>write_only</td>
            <td>128</td>
            <td>13092.32</td>
            <td>2345.44</td>
        </tr>
        <tr>
        	<td>read_write</td>
            <td>300</td>
            <td>28234.34</td>
            <td>1544.33</td>
        </tr>
        <tr>
        	<td rowspan="3">8C32G</td>
            <td>read_only</td>
            <td>300</td>
            <td>38987.34</td>
            <td>2509.89</td>
            <td rowspan="3">6400</td>
        </tr>
        <tr>
        	<td>write_only</td>
            <td>300</td>
            <td>16565.44</td>
            <td>2676.73</td>
        </tr>
        <tr>
        	<td>read_write</td>
            <td>300</td>
            <td>20989.96</td>
            <td>2454.56</td>
        </tr>
	</tbody>
</table>

