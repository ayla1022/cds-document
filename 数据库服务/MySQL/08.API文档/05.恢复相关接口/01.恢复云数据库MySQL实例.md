---
title: 恢复云数据库MySQL实例
date: 2021-12-03 17:00:00
permalink: /pages/1206071/
article: true
---

## 恢复云数据库MySQL实例

### 1.接口描述

**Action：**StartBatchRollbackToTemporaryDBInstance

**描述：** 主从版数据库恢复（7天内任意时间点的恢复，恢复到临时实例）

**请求地址：** cdsapi.capitalonline.net/mysql

**请求方法：** POST

### 2.请求参数

| 参数名                | 必选 | 类型   | 说明                                                   |
| --------------------- | ---- | ------ | ------------------------------------------------------ |
| InstanceUuid          | 是   | string | 实例编号                                               |
| SelectTime            | 是   | string | 选择恢复的时间点（使用查询可恢复时间接口查询时间范围） |
| TemporaryInstanceName | 是   | string | 临时实例服务名称                                       |

### 3.请求示例

```python
def create_temp_instance(instance_uuid,select_time,temporary_instance_name):
    """
    主从实例回滚时间点到临时实例
    :param instance_uuid: 要恢复的实例名称
    :param select_time: 选择恢复的时间点 格式："2020-06-10 05:53:57"（必须在支持范围之内）
    :param temporary_instance_name: 临时实例的名称
    :return:
    """
    action = "StartBatchRollbackToTemporaryDBInstance"
    method = "POST"
    param = {}
    url = get_signature(action, AK, AccessKeySecret, method, MYSQL_URL, param=param)
    body = {
            "InstanceUuid": instance_uuid,
            "SelectTime":select_time,
            "TemporaryInstanceName":temporary_instance_name}
    res = requests.post(url,json=body)
    result = json.loads(res.content)
    print(result)
    
#调用例子
create_temp_instance(instance_uuid="****************",select_time="2020-06-10 05:53:57",temporary_instance_name="***********")  #获取恢复支持的时间范围
```

### 4.返回参数

| 参数名  | 类型   | 说明     |
| ------- | ------ | -------- |
| Message | string | 信息描述 |
| Code    | string | 状态码   |
| Data    | dict   | 数据     |
| TaskId  | string | 任务编号 |

### 5.返回示例

```python
{
    "Code": "Success",
    "Data": {},
    "Message": "任务已下发,请等待执行",
    "TaskId": "***********"
}
```

