---
title: 修改云数据库MySQL普通账号权限
date: 2022-07-20 17:00:00
permalink: /pages/1206095/
article: true
---


## 1.接口描述

**Action**：ModifyDbPrivilege

**描述**：更新（添加、修改）云数据库MySQL普通用户权限

**请求地址**：cdsapi.capitalonline.net/mysql

**请求方法**： POST

## 2.请求参数

| 参数名         | 必选 | 类型                                    | 说明                         |
| :------------- | :--- | :-------------------------------------- | :--------------------------- |
| InstanceUuid   | 是   | string                                  | 要更新用户权限的实例编号     |
| AccountName    | 是   | string                                  | 普通用户的账号名称           |
| Operations     | 是   | list of [Operations](#operationsobj)    | 账号赋权数据库与对应权限列表 |
| ExtraPrivilege | 否   | [ExtraPrivilegeObj](#extraprivilegeobj) | 附加权限                     |

### OperationsObj

| 参数名    | 必选 | 类型   | 说明                                                         |
| :-------- | :--- | :----- | :----------------------------------------------------------- |
| DBName    | 是   | string | 需要赋权的数据库名称                                         |
| Privilege | 是   | string | 数据库对应账号权限。<br />ReadWrite：读写权限<br />DMLOnly：仅DML<br />ReadOnly：只读权限<br />DDLOnly：仅DDL |

### ExtraPrivilegeObj

| 参数名    | 必选 | 类型   | 说明                                                         |
| :-------- | :--- | :----- | ------------------------------------------------------------ |
| AllCreate | 否   | string | 普通账号全局create权限，默认false，取值范围：["ture","false"] |

## 3.请求示例

```python
def modify_mysql_privilege(instance_uuid):
    """
    更新（添加、修改）云数据库MySQL普通用户权限
    :param instance_uuid: 实例编号
    """
    action = "ModifyDbPrivilege"
    method = "POST"
    param = {}
    url = get_signature(action, AK, AccessKeySecret, method, MYSQL_URL, param=param)
    body = {
        "InstanceUuid": instance_uuid,
        "AccountName": "pt",
        "Operations": [{
            "DBName": "test2",
            "Privilege": "ReadWrite"
        }, {
            "DBName": "test1",
            "Privilege": "DDLOnly"
    	}],
        "ExtraPrivilege": {
            "AllCreate": "true"
        }
    }

    res = requests.post(url, json=body)
    result = json.loads(res.content)
    print(result)
```

## 4.返回参数

| 参数名  | 类型   | 说明     |
| :------ | :----- | :------- |
| Message | string | 信息描述 |
| Code    | string | 状态码   |

## 5.返回示例

```json
{
    "Code": "Success",
    "Message": "Success."
}
```

